{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RecommendationResponse",
  "type": "object",
  "required": ["recommended_aspect", "builds"],
  "properties": {
    "recommended_aspect": {
      "type": "string",
      "description": "Наиболее подходящий аспект героя для данной игры"
    },
    "builds": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": [
          "name",
          "winrate_score",
          "build",
          "starting_items",
          "skill_build"
        ],
        "additionalProperties": false,
        "properties": {
          "name": {
            "type": "string",
            "description": "Название билда"
          },
          "description": {
            "type": "string",
            "description": "Краткое описание билда"
          },
          "winrate_score": {
            "type": "number",
            "description": "Оценка билда от 0 до 1"
          },
          "highlight": {
            "type": "boolean",
            "description": "Приоритетный билд"
          },
          "build": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Основные предметы"
          },
          "starting_items": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Начальные предметы"
          },
          "skill_build": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Очередность прокачки скиллов"
          },
          "talents": {
            "type": "object",
            "patternProperties": {
              "^(10|15|20|25)$": { "type": "string" }
            },
            "additionalProperties": false,
            "description": "Выбор талантов на уровнях"
          },
          "game_plan": {
            "type": "object",
            "properties": {
              "early_game": { "type": "string" },
              "mid_game": { "type": "string" },
              "late_game": { "type": "string" }
            },
            "additionalProperties": false,
            "description": "План на игру"
          },
          "item_notes": {
            "type": "object",
            "additionalProperties": { "type": "string" },
            "description": "Пояснения к предметам"
          }
        }
      }
    },
    "suggested_heroes": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "score"],
        "properties": {
          "name": { "type": "string" },
          "score": { "type": "number" },
          "reason": { "type": "string" }
        }
      },
      "description": "Рекомендованные герои"
    },
    "lane_opponents": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Герои против линии"
    },
    "starting_items": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Начальные предметы"
    },
    "build_easy": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Билд в лёгкой игре"
    },
    "build_even": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Билд в равной игре"
    },
    "build_hard": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Билд в тяжёлой игре"
    },
    "warnings": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Предупреждения"
    },
    "source": {
      "type": "string",
      "description": "Источник: 'openai' или 'fallback'"
    }
  },
  "additionalProperties": false
}
